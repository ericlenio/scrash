# vim:filetype=bash
-clear-cache
[ "$SCR_SSH_USER" ]
[ "$SCR_SSH_USER_KNOWN_HOSTS" ]
[ ! -f "$SCR_SSH_USER_KNOWN_HOSTS" ]
t1=$SCR_TMPDIR/t1
len=1000
-random-string $len > $t1
[ -s $t1 ]
-download $t1
[ -s "$SCR_SSH_USER_KNOWN_HOSTS" ]
[ -e /tmp/t1 ]
[ $(-md5 $t1) = $(-md5 /tmp/t1) ]
rm $t1
# test file with space in the name
t2="$SCR_TMPDIR/t2 file"
-random-string $len > "$t2"
[ -s "$t2" ]
-download "$t2"
downloaded_file=/tmp/$(basename "$t2")
[ -e "$downloaded_file" ]
[ $(-md5 "$t2") = $(-md5 "$downloaded_file") ]
rm "$t2"
! -download
! -download /no-such-file
